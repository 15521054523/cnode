<!DOCTYPE html><html><head><meta charset=utf-8><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0" name=viewport><title>wx</title><script src=//libs.baidu.com/jquery/2.1.4/jquery.min.js></script><script src=//cdn.rawgit.com/BR0kEN-/jTap/v0.3.0/jquery.tap.js></script><script src=//res.wx.qq.com/open/js/jweixin-1.0.0.js></script><script src="//wechatfe.github.io/vconsole/lib/vconsole.min.js?v=2.5.2"></script><script>// 全局配置禁言
        var bannedObj = {
            // 全体禁言
            groupBanned: false,
            // 个人禁言
            selfBanned: false
        };
        var txq_uid = localStorage.getItem('txq_uid');
         // 全局配置id
        var userObj = {
          uid: Math.floor(Math.random() * 10000 + 1),
          openId: Math.random().toString(36).substr(2),
          groupId: 1,
          adminId: 1,
		      headimgurl:"",
          nickname:Math.floor(Math.random() * 10000 + 1),
          datalist:"",
          ajaxUrl: 'http://app.yatiku.com',
          loginUrl: 'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx7cbe27b3c5da9d64&redirect_uri=http%3A%2F%2Ftest.yatiku.com%2Fgroupchat%2FpowderSystem%2Findex&Fredirect_uri&response_type=code&scope=snsapi_userinfo&state=1#wechat_redirect'
        };
        // 全局配置路由
        var routerObj = {
            login: '/login',
            register: '/register',
            home: '/home',
            homeSet: 'set',
            taskEdit: '/taskEdit',
            banned: '/banned',
            statement: '/statement',
            inviteFriends: '/inviteFriends',
            examinationResult: '/examinationResult',
            errorPractice: '/errorPractice'
        };

        var openid = userObj.openId;
        var topic = 'GroupChat/GID_yatikuXiYao';//需要操作的Topic
        var accessKey = '9MzuEEB4p0zoMKWq';//账号的AccessKey，在阿里云控制台查看
        var groupId = 'GID_yatikuXiYao';
        var password = 'GoZ5tL67SsATrs+Tk9MphgLlN0s=';
        var onlineMessage = {
          Uid: userObj.uid,
          nickname: userObj.nickname,
          openid: openid,
          dataType: 9,
          isSign: false,
          message: "进来了",
          timer: new Date().getTime()
        };


        localStorage.setItem("txq_nickname", '小明');
        localStorage.setItem("txq_city",'广州');
        localStorage.setItem("txq_country",'广东省广州市');
        localStorage.setItem("txq_openId", 'oWk-fuP7uqLUJcoX118Mt6oWyFZo');
        localStorage.setItem("txq_province",'广东省')
        localStorage.setItem("txq_sex", 0);
        localStorage.setItem("txq_unionid", "0");

        // 将当前的用户注册进入数据库
        $.ajax({
            url: userObj.ajaxUrl + "/wx/powderSystem/joinGroupByUser",
            type: "GET",
            data: {
                uid:  userObj.uid,
                openId: userObj.openId,
                groupId: userObj.groupId
            },
            dataType: "json",
            async: false,
            success:  (response, xml) =>{
              
            },
            fail:  (status) => {
            // 此处放失败后执行的代码
            }
        });


        // websocket
        var host = 'mqtt-cn-459039r2z02.mqtt.aliyuncs.com';// 设置当前用户的接入点域名，接入点获取方法请参考接入准备章节文档，先在控制台申请实例
        var port = 80;//WebSocket协议服务端口，如果是走HTTPS，设置443端口
        var useTLS = false;//是否走加密HTTPS，如果走HTTPS，设置为true
        var cleansession = true;
        var clientId = groupId + '@@@' + openid;//GroupId@@@DeviceId，由控制台申请的Group ID和自己指定的Device ID组合构成

        var mqtt;
        var reconnectTimeout = 2000;
        var username = accessKey;</script><link href=./static/css/app.872893909248359f9e86e0d6c5a7eedb.css rel=stylesheet></head><body><div id=app></div><script type=text/javascript src=./static/js/manifest.1db7d056a774e52ed77c.js></script><script type=text/javascript src=./static/js/vendor.96f977ce04c11c1eaa61.js></script><script type=text/javascript src=./static/js/app.784505c8a8fed8957511.js></script></body></html>